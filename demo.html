<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Araba Modifiye MVP - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .demo-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .demo-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .feature-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .demo-interface {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .upload-area {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #764ba2;
            background: #f0f0f0;
        }
        
        .upload-area.dragover {
            border-color: #764ba2;
            background: #e8f4fd;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #667eea;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        .control-group input[type="color"] {
            width: 100%;
            height: 40px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .control-group input[type="color"]:hover {
            border-color: #667eea;
        }
        
        .control-group .value {
            font-size: 0.9rem;
            color: #666;
        }

        .color-presets {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .color-preset {
            width: 30px;
            height: 30px;
            border: 2px solid #e9ecef;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-preset:hover {
            border-color: #667eea;
            transform: scale(1.1);
        }

        .color-preset.selected {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .preview {
            text-align: center;
            margin-top: 20px;
        }
        
        .preview img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .status {
            background: #e8f5e8;
            border: 1px solid #28a745;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .error {
            background: #f8d7da;
            border: 1px solid #dc3545;
            color: #721c24;
        }
        
        .tech-stack {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .tech-stack h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .tech-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tech-tag {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.8;
        }

        /* Jant Modal Stilleri */
        .wheel-modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            overflow-y: auto;
        }

        .wheel-modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .wheel-modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wheel-modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }

        .close-btn {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .close-btn:hover {
            opacity: 0.7;
        }

        .wheel-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #667eea;
        }

        .filter-group select {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .wheels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
            max-height: 400px;
            overflow-y: auto;
        }

        .wheel-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .wheel-item:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
        }

        .wheel-item.selected {
            border-color: #667eea;
            background: #f0f4ff;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .wheel-item img {
            width: 100%;
            height: 150px;
            object-fit: contain;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .wheel-item h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.1rem;
        }

        .wheel-item .wheel-specs {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }

        .wheel-preview-section {
            padding: 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .wheel-preview-section h4 {
            margin: 0 0 20px 0;
            color: #667eea;
            text-align: center;
        }

        .wheel-preview {
            text-align: center;
            margin-bottom: 20px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 12px;
            border: 2px dashed #e9ecef;
        }

        .wheel-preview img {
            max-width: 100%;
            max-height: 180px;
            border-radius: 8px;
        }

        .wheel-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .wheel-controls .btn {
            min-width: 120px;
        }

        .wheel-controls .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }

            .wheel-modal-content {
                width: 95%;
                margin: 2% auto;
            }

            .wheel-filters {
                grid-template-columns: 1fr;
            }

            .wheels-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                padding: 20px;
            }

            .wheel-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚗 Araba Modifiye MVP</h1>
            <p>Araç modifiye denemeleri için 2D görsel işleme uygulaması</p>
        </div>

        <div class="demo-section">
            <h2>✨ Özellikler</h2>
            <div class="features">
                <div class="feature-card">
                    <h3>🔐 Kullanıcı Yönetimi</h3>
                    <p>JWT tabanlı authentication sistemi ile güvenli giriş ve kayıt</p>
                </div>
                <div class="feature-card">
                    <h3>📁 Proje Yönetimi</h3>
                    <p>Projeleri oluşturma, düzenleme ve organize etme</p>
                </div>
                <div class="feature-card">
                    <h3>🖼️ Görsel İşleme</h3>
                    <p>OpenCV ile araç segmentasyonu ve renk değişimi</p>
                </div>
                <div class="feature-card">
                    <h3>⚙️ Jant Overlay</h3>
                    <p>Homography transform ile gerçekçi jant yerleştirme</p>
                </div>
                <div class="feature-card">
                    <h3>📊 Jant Kataloğu</h3>
                    <p>OEM uyumlu jant veritabanı ve filtreleme</p>
                </div>
                <div class="feature-card">
                    <h3>🔗 Proje Paylaşımı</h3>
                    <p>Çalışmaları paylaşılabilir linkler ile yayınlama</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>🎮 Demo Arayüzü</h2>
            
            <div id="status" class="status">
                ✅ Demo modunda çalışıyor - Gerçek API bağlantısı için backend'i başlatın
            </div>

            <div class="demo-interface">
                <div class="upload-area" id="uploadArea">
                    <p>📸 Araç fotoğrafını buraya sürükleyin veya tıklayın</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label>Renk Seçici</label>
                        <input type="color" id="colorPicker" value="#ff0000">
                        <div class="value">Seçilen Renk</div>
                    </div>
                    <div class="control-group">
                        <label>Hue (Renk Tonu)</label>
                        <input type="range" id="hueSlider" min="-90" max="90" value="0">
                        <div class="value">Değer: <span id="hueValue">0</span></div>
                    </div>
                    <div class="control-group">
                        <label>Saturation (Doygunluk)</label>
                        <input type="range" id="satSlider" min="-1" max="1" step="0.05" value="0">
                        <div class="value">Değer: <span id="satValue">0</span></div>
                    </div>
                    <div class="control-group">
                        <label>Value (Parlaklık)</label>
                        <input type="range" id="valSlider" min="-1" max="1" step="0.05" value="0">
                        <div class="value">Değer: <span id="valValue">0</span></div>
                    </div>
                    <div class="control-group">
                        <label>Renk Önayarları</label>
                        <div class="color-presets">
                            <button class="color-preset" data-color="#ff0000" style="background: #ff0000;"></button>
                            <button class="color-preset" data-color="#00ff00" style="background: #00ff00;"></button>
                            <button class="color-preset" data-color="#0000ff" style="background: #0000ff;"></button>
                            <button class="color-preset" data-color="#ffff00" style="background: #ffff00;"></button>
                            <button class="color-preset" data-color="#ff00ff" style="background: #ff00ff;"></button>
                            <button class="color-preset" data-color="#00ffff" style="background: #00ffff;"></button>
                            <button class="color-preset" data-color="#ffffff" style="background: #ffffff;"></button>
                            <button class="color-preset" data-color="#000000" style="background: #000000;"></button>
                        </div>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-primary" id="segmentBtn">🔍 Segmentasyon</button>
                    <button class="btn btn-primary" id="recolorBtn">🎨 Renk Değiştir</button>
                    <button class="btn btn-secondary" id="wheelBtn">⚙️ Jant Ekle</button>
                    <button class="btn btn-secondary" id="resetColorBtn">🔄 Renk Sıfırla</button>
                    <button class="btn btn-secondary" id="saveBtn">💾 Kaydet</button>
                </div>

                <div class="preview" id="preview">
                    <p>Fotoğraf yükleyin ve işlemleri deneyin</p>
                </div>
            </div>
        </div>

        <!-- Jant Seçim Modal -->
        <div id="wheelModal" class="wheel-modal" style="display: none;">
            <div class="wheel-modal-content">
                <div class="wheel-modal-header">
                    <h3>⚙️ Araçla Uyumlu Jantlar</h3>
                    <span class="close-btn" id="closeWheelModal">&times;</span>
                </div>
                
                <div class="wheel-filters">
                    <div class="filter-group">
                        <label>Marka:</label>
                        <select id="brandFilter">
                            <option value="">Tümü</option>
                            <option value="BMW">BMW</option>
                            <option value="Mercedes">Mercedes</option>
                            <option value="Audi">Audi</option>
                            <option value="Volkswagen">Volkswagen</option>
                            <option value="Renault">Renault</option>
                            <option value="Ford">Ford</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Boyut:</label>
                        <select id="sizeFilter">
                            <option value="">Tümü</option>
                            <option value="17">17"</option>
                            <option value="18">18"</option>
                            <option value="19">19"</option>
                            <option value="20">20"</option>
                            <option value="21">21"</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Stil:</label>
                        <select id="styleFilter">
                            <option value="">Tümü</option>
                            <option value="Sport">Sport</option>
                            <option value="Luxury">Lüks</option>
                            <option value="Classic">Klasik</option>
                            <option value="Modern">Modern</option>
                            <option value="Premium">Premium</option>
                        </select>
                    </div>
                </div>

                <div class="wheels-grid" id="wheelsGrid">
                    <!-- Jantlar buraya dinamik olarak eklenecek -->
                </div>

                <div class="wheel-preview-section">
                    <h4>Seçilen Jant Önizlemesi</h4>
                    <div class="wheel-preview" id="wheelPreview">
                        <p>Bir jant seçin</p>
                    </div>
                    <div class="wheel-controls">
                        <button class="btn btn-primary" id="applyWheelBtn" disabled>Jantı Uygula</button>
                        <button class="btn btn-secondary" id="resetWheelBtn">Sıfırla</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>🛠️ Teknoloji Stack</h2>
            <div class="tech-stack">
                <h3>Backend</h3>
                <div class="tech-list">
                    <span class="tech-tag">FastAPI</span>
                    <span class="tech-tag">Python</span>
                    <span class="tech-tag">OpenCV</span>
                    <span class="tech-tag">SQLAlchemy</span>
                    <span class="tech-tag">JWT</span>
                </div>
                
                <h3>Frontend</h3>
                <div class="tech-list">
                    <span class="tech-tag">React</span>
                    <span class="tech-tag">TypeScript</span>
                    <span class="tech-tag">Vite</span>
                    <span class="tech-tag">Modern CSS</span>
                </div>
                
                <h3>Veritabanı</h3>
                <div class="tech-list">
                    <span class="tech-tag">PostgreSQL</span>
                    <span class="tech-tag">SQLite</span>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>📋 Kurulum Talimatları</h2>
            <ol style="line-height: 2; padding-left: 20px;">
                <li><strong>Backend:</strong> <code>cd backend && python -m uvicorn app.main:app --reload --port 8000</code></li>
                <li><strong>Frontend:</strong> <code>cd frontend && npm run dev</code></li>
                <li><strong>Veritabanı:</strong> SQLite otomatik oluşturulur, PostgreSQL için .env dosyası düzenleyin</li>
                <li><strong>Tarayıcı:</strong> http://localhost:5173 adresini açın</li>
            </ol>
        </div>

        <div class="footer">
            <p>🚀 Araba Modifiye MVP - Geliştirici Demo</p>
        </div>
    </div>

    <script>
        // Demo fonksiyonları
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const preview = document.getElementById('preview');
        const status = document.getElementById('status');
        
        // Renk seçici ve slider değerlerini güncelle
        document.getElementById('colorPicker').addEventListener('input', function() {
            const color = this.value;
            console.log('Seçilen renk:', color);
            applyColorFilter(color);
        });

        document.getElementById('hueSlider').addEventListener('input', function() {
            document.getElementById('hueValue').textContent = this.value;
            applyRealTimeColor();
        });
        
        document.getElementById('satSlider').addEventListener('input', function() {
            document.getElementById('satValue').textContent = this.value;
            applyRealTimeColor();
        });
        
        document.getElementById('valSlider').addEventListener('input', function() {
            document.getElementById('valValue').textContent = this.value;
            applyRealTimeColor();
        });

        // Renk önayarları
        document.querySelectorAll('.color-preset').forEach(preset => {
            preset.addEventListener('click', function() {
                const color = this.dataset.color;
                document.getElementById('colorPicker').value = color;
                
                // Önceki seçimi kaldır
                document.querySelectorAll('.color-preset').forEach(p => p.classList.remove('selected'));
                this.classList.add('selected');
                
                applyColorFilter(color);
            });
        });
        
        // Dosya yükleme
        if (uploadArea && fileInput) {
            uploadArea.addEventListener('click', () => {
                console.log('Upload area tıklandı');
                fileInput.click();
            });
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.remove('dragover');
                console.log('Dosya bırakıldı');
                const files = e.dataTransfer.files;
                console.log('Bırakılan dosyalar:', files.length);
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                console.log('File input değişti');
                if (e.target.files.length > 0) {
                    console.log('Seçilen dosya:', e.target.files[0]);
                    handleFile(e.target.files[0]);
                }
            });
        } else {
            console.error('Upload area veya file input bulunamadı');
        }
        
        function handleFile(file) {
            console.log('Dosya seçildi:', file.name, file.type, file.size);
            
            if (!file.type.startsWith('image/')) {
                showStatus('Lütfen geçerli bir resim dosyası seçin', 'error');
                return;
            }
            
            showStatus('Resim yükleniyor...', 'info');
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                console.log('Dosya okundu, boyut:', e.target.result.length);
                originalImage = e.target.result; // Orijinal resmi sakla
                preview.innerHTML = `<img src="${e.target.result}" alt="Yüklenen resim" style="max-width: 100%; max-height: 400px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">`;
                currentImageElement = preview.querySelector('img'); // Mevcut resim elementini sakla
                showStatus('Resim başarıyla yüklendi! Şimdi işlemleri deneyebilirsiniz.', 'success');
            };
            
            reader.onerror = function() {
                console.error('Dosya okuma hatası:', reader.error);
                showStatus('Dosya okunamadı: ' + reader.error, 'error');
            };
            
            reader.onprogress = function(e) {
                if (e.lengthComputable) {
                    const percentComplete = (e.loaded / e.total) * 100;
                    showStatus(`Resim yükleniyor... %${Math.round(percentComplete)}`, 'info');
                }
            };
            
            try {
                reader.readAsDataURL(file);
            } catch (error) {
                console.error('Dosya okuma hatası:', error);
                showStatus('Dosya okunamadı: ' + error.message, 'error');
            }
        }
        
        // Türkiye'de kullanılan markaların orijinal jantları
        const wheelsDatabase = [
            // BMW Jantları
            {
                id: 1,
                name: "BMW M Sport 19\"",
                brand: "BMW",
                size: "19",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzMzIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTIwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTIwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw4MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "19x8.5J, ET35, 5x120 PCD"
            },
            {
                id: 2,
                name: "BMW Luxury 20\"",
                brand: "BMW",
                size: "20",
                style: "Luxury",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNTU1Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTQwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTQwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw2MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "20x9J, ET38, 5x120 PCD"
            },
            {
                id: 3,
                name: "BMW Classic 18\"",
                brand: "BMW",
                size: "18",
                style: "Classic",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNzc3Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTEwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTEwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw5MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "18x8J, ET42, 5x120 PCD"
            },
            // Mercedes Jantları
            {
                id: 4,
                name: "Mercedes AMG 20\"",
                brand: "Mercedes",
                size: "20",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMjIyIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTQwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTQwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw2MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "20x9J, ET40, 5x112 PCD"
            },
            {
                id: 5,
                name: "Mercedes Classic 17\"",
                brand: "Mercedes",
                size: "17",
                style: "Classic",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNzc3Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTEwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTEwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw5MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "17x7.5J, ET42, 5x112 PCD"
            },
            {
                id: 6,
                name: "Mercedes Maybach 21\"",
                brand: "Mercedes",
                size: "21",
                style: "Luxury",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMTExIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTMwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTMwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw3MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "21x9.5J, ET45, 5x112 PCD"
            },
            // Audi Jantları
            {
                id: 7,
                name: "Audi RS 21\"",
                brand: "Audi",
                size: "21",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMTExIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTMwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTMwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw3MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "21x9.5J, ET45, 5x112 PCD"
            },
            {
                id: 8,
                name: "Audi Sport 19\"",
                brand: "Audi",
                size: "19",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNDQ0Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTEwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTEwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw5MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "19x8.5J, ET43, 5x112 PCD"
            },
            // Volkswagen Jantları
            {
                id: 9,
                name: "VW Golf R 18\"",
                brand: "Volkswagen",
                size: "18",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNDQ0Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTEwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTEwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw5MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "18x8J, ET45, 5x112 PCD"
            },
            {
                id: 10,
                name: "VW GTI 19\"",
                brand: "Volkswagen",
                size: "19",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNTU1Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTIwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTIwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw4MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "19x8.5J, ET42, 5x112 PCD"
            },
            // Renault Jantları
            {
                id: 11,
                name: "Renault Megane RS 19\"",
                brand: "Renault",
                size: "19",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNjY2Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTIwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTIwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw4MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "19x8J, ET48, 5x108 PCD"
            },
            // Ford Jantları
            {
                id: 12,
                name: "Ford Focus ST 18\"",
                brand: "Ford",
                size: "18",
                style: "Sport",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNzc3Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI4Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxwYXRoIGQ9Ik0xMDAgMjBMMTEwIDgwTDEwMCAxNDBMMjAgODBMMTAwIDIwWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNMTAwIDE2MEwxODAgMTAwTDEwMCA0MEwyMCAxMDBMMTAwIDE2MFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTE2MCAxMDBMMTEwIDgwTDEwMCAxNDBMMTgwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTQwIDEwMEw5MCA4MEwxMDAgMTQwTDIwIDEyMFoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+",
                specs: "18x8J, ET50, 5x108 PCD"
            }
        ];

        let selectedWheel = null;
        let filteredWheels = [...wheelsDatabase];
        let originalImage = null;
        let currentImageElement = null;

        // Renk filtreleme fonksiyonları
        function applyColorFilter(color) {
            if (!currentImageElement) {
                showStatus('Önce bir resim yükleyin', 'error');
                return;
            }

            // Canvas kullanarak sadece araç üzerinde renk filtresi uygula
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = currentImageElement.width;
            canvas.height = currentImageElement.height;
            
            // Orijinal resmi çiz
            ctx.drawImage(currentImageElement, 0, 0);
            
            // Araç segmentasyonu için basit algılama (demo için)
            // Gerçek uygulamada OpenCV GrabCut kullanılır
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            // Basit araç algılama: Alt yarıda ve orta bölgede renk değiştir
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    const index = (y * canvas.width + x) * 4;
                    
                    // Araç bölgesi: Alt yarı ve orta bölge
                    if (y > canvas.height * 0.3 && 
                        x > canvas.width * 0.1 && 
                        x < canvas.width * 0.9) {
                        
                        // Renk filtresi uygula
                        const r = data[index];
                        const g = data[index + 1];
                        const b = data[index + 2];
                        
                        // Seçilen rengi parse et
                        const hexColor = color.replace('#', '');
                        const targetR = parseInt(hexColor.substr(0, 2), 16);
                        const targetG = parseInt(hexColor.substr(2, 2), 16);
                        const targetB = parseInt(hexColor.substr(4, 2), 16);
                        
                        // Renk karışımı (50% orijinal + 50% hedef)
                        data[index] = Math.round(r * 0.5 + targetR * 0.5);
                        data[index + 1] = Math.round(g * 0.5 + targetG * 0.5);
                        data[index + 2] = Math.round(b * 0.5 + targetB * 0.5);
                    }
                }
            }
            
            // Filtrelenmiş görüntüyü canvas'a uygula
            ctx.putImageData(imageData, 0, 0);
            
            // Sonucu göster
            const filteredDataUrl = canvas.toDataURL();
            const preview = document.getElementById('preview');
            preview.innerHTML = `<img src="${filteredDataUrl}" alt="Renklendirilmiş resim" style="max-width: 100%; max-height: 400px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">`;
            currentImageElement = preview.querySelector('img');
            
            showStatus(`🎨 ${color} rengi sadece araç üzerine uygulandı!`, 'success');
        }

        function applyRealTimeColor() {
            const hue = document.getElementById('hueSlider').value;
            const sat = document.getElementById('satSlider').value;
            const val = document.getElementById('valSlider').value;
            
            if (!currentImageElement) {
                showStatus('Önce bir resim yükleyin', 'error');
                return;
            }

            // CSS filter ile gerçek zamanlı renk değişimi
            const preview = document.getElementById('preview');
            const img = preview.querySelector('img');
            if (img) {
                img.style.filter = `
                    hue-rotate(${hue}deg) 
                    saturate(${1 + parseFloat(sat)}) 
                    brightness(${1 + parseFloat(val)})
                `;
            }
        }

        function resetColorFilters() {
            if (originalImage && currentImageElement) {
                const preview = document.getElementById('preview');
                preview.innerHTML = `<img src="${originalImage}" alt="Orijinal resim" style="max-width: 100%; max-height: 400px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">`;
                currentImageElement = preview.querySelector('img');
                
                // Slider'ları sıfırla
                document.getElementById('hueSlider').value = 0;
                document.getElementById('satSlider').value = 0;
                document.getElementById('valSlider').value = 0;
                document.getElementById('hueValue').textContent = '0';
                document.getElementById('satValue').textContent = '0';
                document.getElementById('valValue').textContent = '0';
                
                showStatus('Renk filtreleri sıfırlandı', 'success');
            }
        }

        // Jant modal işlevleri
        function openWheelModal() {
            document.getElementById('wheelModal').style.display = 'block';
            renderWheels();
        }

        function closeWheelModal() {
            document.getElementById('wheelModal').style.display = 'none';
            selectedWheel = null;
            document.getElementById('wheelPreview').innerHTML = '<p>Bir jant seçin</p>';
            document.getElementById('applyWheelBtn').disabled = true;
        }

        function renderWheels() {
            const wheelsGrid = document.getElementById('wheelsGrid');
            wheelsGrid.innerHTML = '';

            filteredWheels.forEach(wheel => {
                const wheelItem = document.createElement('div');
                wheelItem.className = 'wheel-item';
                wheelItem.onclick = () => selectWheel(wheel);
                
                wheelItem.innerHTML = `
                    <img src="${wheel.image}" alt="${wheel.name}">
                    <h4>${wheel.name}</h4>
                    <div class="wheel-specs">${wheel.specs}</div>
                `;
                
                wheelsGrid.appendChild(wheelItem);
            });
        }

        function selectWheel(wheel) {
            selectedWheel = wheel;
            
            // Önceki seçimi kaldır
            document.querySelectorAll('.wheel-item').forEach(item => item.classList.remove('selected'));
            
            // Yeni seçimi işaretle
            event.currentTarget.classList.add('selected');
            
            // Önizleme güncelle
            document.getElementById('wheelPreview').innerHTML = `
                <img src="${wheel.image}" alt="${wheel.name}">
            `;
            
            // Uygula butonunu aktif et
            document.getElementById('applyWheelBtn').disabled = false;
        }

        function applyWheel() {
            if (!selectedWheel) return;
            
            showStatus(`⚙️ ${selectedWheel.name} jantı araç üzerine uygulandı! (Demo modunda simüle ediliyor)`, 'success');
            
            // Gerçek uygulamada burada jant overlay işlemi yapılır
            // OpenCV ile homography transform ve blending
        }

        function resetWheel() {
            selectedWheel = null;
            document.querySelectorAll('.wheel-item').forEach(item => item.classList.remove('selected'));
            document.getElementById('wheelPreview').innerHTML = '<p>Bir jant seçin</p>';
            document.getElementById('applyWheelBtn').disabled = true;
        }

        function filterWheels() {
            const brand = document.getElementById('brandFilter').value;
            const size = document.getElementById('sizeFilter').value;
            const style = document.getElementById('styleFilter').value;
            
            filteredWheels = wheelsDatabase.filter(wheel => {
                return (!brand || wheel.brand === brand) &&
                       (!size || wheel.size === size) &&
                       (!style || wheel.style === style);
            });
            
            renderWheels();
        }

        // Buton işlevleri
        document.getElementById('segmentBtn').addEventListener('click', () => {
            showStatus('🔍 Segmentasyon işlemi başlatıldı... (Demo modunda simüle ediliyor)', 'info');
        });
        
        document.getElementById('recolorBtn').addEventListener('click', () => {
            const hue = document.getElementById('hueSlider').value;
            const sat = document.getElementById('satSlider').value;
            const val = document.getElementById('valSlider').value;
            showStatus(`🎨 Renk değişimi uygulandı: H:${hue}, S:${sat}, V:${val}`, 'success');
        });
        
        document.getElementById('wheelBtn').addEventListener('click', () => {
            openWheelModal();
        });

        document.getElementById('resetColorBtn').addEventListener('click', () => {
            resetColorFilters();
        });
        
        document.getElementById('saveBtn').addEventListener('click', () => {
            showStatus('💾 Proje kaydedildi! (Demo modunda simüle ediliyor)', 'success');
        });
        
        function showStatus(message, type = 'info') {
            status.textContent = message;
            status.className = 'status';
            if (type === 'error') {
                status.classList.add('error');
            }
        }
        
        // Modal event listener'ları
        document.getElementById('closeWheelModal').addEventListener('click', closeWheelModal);
        document.getElementById('applyWheelBtn').addEventListener('click', applyWheel);
        document.getElementById('resetWheelBtn').addEventListener('click', resetWheel);
        
        // Filtre event listener'ları
        document.getElementById('brandFilter').addEventListener('change', filterWheels);
        document.getElementById('sizeFilter').addEventListener('change', filterWheels);
        document.getElementById('styleFilter').addEventListener('change', filterWheels);
        
        // Modal dışına tıklandığında kapat
        window.addEventListener('click', (event) => {
            const modal = document.getElementById('wheelModal');
            if (event.target === modal) {
                closeWheelModal();
            }
        });

        // Sayfa yüklendiğinde demo mesajı ve element kontrolü
        window.addEventListener('load', () => {
            console.log('Sayfa yüklendi');
            console.log('Upload area:', uploadArea);
            console.log('File input:', fileInput);
            console.log('Preview:', preview);
            console.log('Status:', status);
            
            if (uploadArea && fileInput && preview && status) {
                showStatus('🎉 Araba Modifiye MVP Demo sayfasına hoş geldiniz!', 'success');
            } else {
                showStatus('❌ Sayfa elementleri yüklenemedi', 'error');
            }
        });
    </script>
</body>
</html>
